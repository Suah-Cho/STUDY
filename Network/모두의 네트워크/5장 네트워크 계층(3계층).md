# 5장 네트워크 계층(3계층)

**네트워크 계층**

**라우터란?**

: 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는 것이 좋을지를 알려준다.

- IP주소가 있어야 통신할 수 있다.
- IP주소 : 어떤 네트워크의 어떤 컴퓨터인지를 구분할 수 있도록 하는 주소 cf) MAC주소
    - 라우팅 : 목적지 IP주소까지 어떤 경로로 데이터를 보낼지 결정하는 것
        - 라우터 필요
- 라우팅 테이블이 있어 경로 정보를 등록하고 관리한다.

**IP란?**

- 네트워크 계층에 존재
- 네트워크 계층의 대표적인 프로토콜에는 IP주소가 있다.
- 네트워크 계층에서 캡슐화 할 때 IP헤더를 붙인다.
    
    ![image](https://github.com/Suah-Cho/STUDY/assets/102336763/305fdb0c-750d-4e88-8678-6e72f01bd0d4)

    
- IP패킷 : IP프로토콜을 사용하여 캡슐화 할 때는 데이터에 IP헤더가 추가되어 만들어진 것

**IP주소**

- IP주소는 인터넷 서비스 제공자(ISP)가 제공

| IPv4 | IPv6 |
| --- | --- |
| 32비트 | 128비트 |
| 제한 | 사실상 무제한 |

| 공인 IP 주소 | 사설 IP 주소 |
| --- | --- |
| 인터넷 서비스 제공자(ISP)가 제공 | - |
| 인터넷에 직접 연결되어 있는 컴퓨터나 라우터에 할당 | 랜에 있는 컴퓨터에 할당 |
- MAC주소 → 48비트, 16진수 / IP주소 → 32비트, 10진수

| 네트워크 ID | 호스트 ID |
| --- | --- |
| 어떤 네트워크 인지 나타냄 | 해당 네트워크의 어느 컴퓨터인지 나타냄 |

→ IP주소 = 네트워크 ID + 호스트 ID

**IP 주소 클래스**

클래스 : 네트워크 크기

|  | 네트워크 ID | 호스트 ID |
| --- | --- | --- |
| A클래스 | 8비트 | 24비트 |
| B클래스 | 16비트 | 16비트 |
| C클래스 | 24비트 | 8비트 |

| 종류 | 공인 IP주소의 범위 |
| --- | --- |
| A클래스 | 1.0.0.0~9.255.255.255 11.0.0.0~126.255.255.255 |
| B클래스 | 128.0.0.0~172.15.255.255 172.32.0.0~191.255.255.255 |
| C클래스 | 192.0.0.0~192.167.255.255 192.169.0.0~233.255.255.255 |

| 종류 | 사설 IP주소의 범위 |
| --- | --- |
| A클래스 | 10.0.0.0~10.255.255.255  |
| B클래스 | 172.16.0.0~172.31.255.255 |
| C클래스 | 192.168.0.0~192.168.255.255 |

**네트워크 주소와 브러드캐스트 주소란?**

- 특별한 주소로 컴퓨터나 라우터가 자신의 IP로 사용하면 안되는 주소
- 네트워크 주소
    - 전체 네트워크에서 작은 네트워크를 식별하는 데 사용된다.
    - 호스트 ID가 10진수로 0이면 그 네트워크 전체를 대표하는 주소(=전체 네트워크의 대표 주소)
        - ex) 192.168.1.1~192.168.1.6은 192.168.1.0의 네트워크에 있다.
- 브로드캐스트 주소
    - 네트워크에 있는 컴퓨터나 장비 모두에게 한 번에 데이터를 전송하는 데 사용되는 전용 IP주소
        - 전체 네트워크에 데이터를 전송하려면 호스트 ID를 255로 설정한다.

**서브넷의 구조**

서브넷팅 : 대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트로 전송되는 패킷을 줄이는 것

서브넷 : 분할된 네트워크

| 네트워크 ID | 호스트 ID | → | 네트워크 ID | 서브넷ID | 호스트 ID |
| --- | --- | --- | --- | --- | --- |
|  |  |  |  | 호스트 ID | 호스트 ID |

서브넷 마스크 : 네트워크 ID와 호스트 ID를 식별하기 위한 값

- 프리픽스 표기법 : 서브넷 마스크를 슬래시(/비트 수)로 나타낸 것

255.255.255.255 

255.255.255.255

255.255.255.0

255.255.255.127

---

0.0.0.255

0.0.0.128

192.168.0.x/25     → 192.168.0은 네트워크 주소. 뒤에 x가 호스트 주소

255.255.255.128

GATEWAY도 하나의 HOST를 가진다. 

**라우터의 구조**

**라우터**

- 네트워크를 분리할 수 있다.
    - cf) 스위치만 있는 네트워크에서는 모든 컴퓨터와 스위치가 동일한 네트워크에 속하게 된다.

**다른 네트워크로 접속하는 경우**

1. 네트워크 출입구를 지정한 후 라우터로 데이터 전송
2. 라우팅 기능 사용
    1. 라우터의 라우팅 테이블에 경로 정보가 등록되어 있어 라우팅이 가능
    2. 소규모 네트워크 → 수동으로 등록
    3. 대규모 네트워크 → 자동으로 등록
    4. 라우팅 프로토콜(RIP, OSPE, BGP) : 라우팅 프로토콜을 설정하여 라우터 간에 경로 정보를 교환하고 라우팅 테이블에 등록해나간다.
    - GATEWAY를 통해서 들어온 PACKET이 어느 HOST로 가야할지 구분해주는 역할
        
        (ROUTER은 내부에 있어 IP주소가 필요 없다.)
        
        (GATEWAY(외부이기 때문에 하나의 IP주소를 가져야한다.)는 어느 곳으로 가야할지 구분해주는 역할(외부에서))
