### MSA란?

![image](https://github.com/Suah-Cho/STUDY/assets/102336763/5c745e7a-7354-4aba-978f-084b31187343)

*["the microservice architectural style is an approach to developing a single application as a suite of **small services, each running in its own process** and communicating with lightweight mechanisms, often an HTTP resource API. These services are built around business capabilities and **independently deployable** by fully automated deployment machinery.](https://martinfowler.com/articles/microservices.html)”*

단일 애플리케이션을 소규모 서비스 모음으로 개발하는 접근 방식 → 각 서비스는 자체 프로세스에서 실행되고 경량 메커니즘(주로 HTTP 리소스 API)과 통신

⇒ 완전히 자동화된 배포 기계를 통해 독립적으로 배포 가능

⇒ 최소한의 중앙 집중식 관리

⇒ 다양한 프로그래밍 언어로 작성되고 다양한 데이터 저장 기술 사용 가능

> **Monolithic Architecture**
소프트웨어의 모든 구성요소가 한 프로젝트에 통합되어 있는 형태
> 
> - 아직까지는 많은 소프트웨어가 Monolithic 형태로 구현되어 있으며 소규모 프로젝트에는 Monolithic Architecture가 훨신 합리적이다.
> -> WHY? 간단한 아키텍처이며 유지보수가 용이하기 때문
> - 최근 클라우드에 배포되는 애플리케이션 多 → 애플리케이션의 작은 부분을 변경하려면 전체 모놀리스를 다시 구축하고 배포해야함
>     
>     ⇒ 서비스가 커질 수록 좋은 모듈 구조를 유지하기 어려운 경우 多
>


**1. 마이크로서비스 아키텍처 특징**

1.1 서비스를 사용한 컴포넌트화

- 독립된 컨테이너상에 배포하는 서비스는 개별적으로 교체할 수 있으므로 애플리케이션 변경이 용이하며, 작은 단위의 확장성을 실현할 수 있다.
- 마이크로서비스의 서비스 간 통신에는 간단하고 가벼운 통신 기법(REST or 경량 메시징) 사용

1.2 개발/운영 체제

- 콘웨이 법칙(Conway’s law)
    - 시스템 구조는 프로젝트를 체제를 반영한다.
    
   ![image](https://github.com/Suah-Cho/STUDY/assets/102336763/676edab6-c655-440b-b372-65ef4d5ed25f)

    
    - 마이크로서비스 아키텍처 - 애자일 개발 방법 → 좋은 궁합
        - 운영도 하면서 최종 사용자의 피드백이 있을 때마다 개발을 반복적으로 진행 → 애플리케이션 릴리스를 지속하는 방식

1.3 개발 환경과 영구 데이터 저장소의 거버넌스

프로그래밍 언어나 데이터 베이스를 `각 개발/운영팀이 선정` → 명확한 이유가 있고 각 서비스의 개발/운영에 적합한선택이라면, 서비스마다 다른 프로그래밍 언어나 데이터베이스 사용 가능

⇒ 애플리케이션의 일부를 담당하는 서비스지만, 독립된 프로세스나 컨테이너상에서 실행

⇒ 마이크로서비스에서는 개발 환경과 영구 데이터 저장소는 프로젝트에 의한 중앙 집권이 아니라 `각팀에 의한 분산 통치가 허용`

1.4 인프라 환경 고려 사항

- 인프라 환경 구축, 소프트웨어 컴파일, 빌드, 테스트, 배포 자동화 등의 CD를 권장
    - 자동화
        - 개발 릴리스 및 운영의 속도를 높임
        - 운영 실수 감소
        - 테스트가 필요할 때 자동으로 실시하여 시스템의 품질 향상 기여
- `장애 발생을 전제로 한 설계 제안`
    - 각 서비스가 로그 및 트레이스(trace) 기능을 구현하는 것은 물론이고, 서버 및 네트워크 매트릭(metric)으르 감시해서 적시에 장애를 감지하고 대응하는 것 추천

**2. 마이크로 서비스의 개발/운영 흐름**

`도메인 분석&설계 → 개발 → 시스템 릴리스 → 운영`

- 애자일 개발 프로세스 → 개발/운영 환경 반복
    
    *⇒ 미리 대상 도메인을 분할해서 첫 이터레이션(iteration, 개발 반복 단계)에서는 도메인 분할된 A라는 부분을 대상으로 하고, 다음 이터레이션에서는 B라는 부분을 대상으로 한다. 이런 식으로 `점진적`으로 개발과 릴리스를 진행해나간다.*
    
- 단계 책임 담당자 (애자일 영향)
    
    
    | 단계 | 책임 담당자 |
    | --- | --- |
    | 도메인 분석/설계|IT아키텍트 + 도메인 전문가(비지니스 전문가)|
    | 개발 | 프로그래머(소프트웨어 엔지니어) |
    | 운영 | 사이트 안정성 엔지니어
    ( 구글이 제창한 SRE(Site Reliability Engineering, 사이트안정성 엔지니어링)라는 기법을 기반으로 IT시스템 운영을 책임지는 역할) |
    - 도메인 분석은 비지니스 상세 정보가 필요하므로 비즈니스 전문가의 도움이 필요

**3. 마이크로서비스의 적용 기준**

- 마이크로서비스 프리미엄 : 마이크로서비스 적용이 적합하지 않은 상태
- 소규모 프로젝트의 경우 적합하지 않음
    
    *⇒ 기존과 다른 조직 체제와 애자일 개발 프로세스 실천, 도메인 분석과 서비스 모델링, 인프라 구축의 자동화, 분산 시스템 환경 운영 및 감시, 분산 배치된 데이터베이스의 동기화 등 많은 작업을 수행해야하는데, 단수누한 소규모 시스템에 마이크로 서비스를 적용하려면 기존 모놀로식 준비기간에 배가 드는 시간을 투자해야한다.*
